{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div class="card" style="max-width:860px;margin:20px auto">
	<div class="card-body">
		<h2 class="card-title">{% trans "Confirmar pagamentos selecionados" %}</h2>
		<p class="text-muted">{% trans "Esta ação irá aplicar créditos (com bônus) na carteira dos usuários e marcar os pagamentos como pagos. Confirme para continuar." %}</p>

		<form method="post" action="">{% csrf_token %}
			<input type="hidden" name="action" value="{{ action }}" />
			<input type="hidden" name="apply" value="1" />
			{% for obj in queryset %}
				<input type="hidden" name="_selected_action" value="{{ obj.pk }}" />
			{% endfor %}

			<div class="table-responsive">
				<table class="table table-sm table-striped">
					<thead>
						<tr>
							<th>{% trans "Usuário" %}</th>
							<th>{% trans "Valor" %}</th>
							<th>{% trans "Método" %}</th>
							<th>{% trans "Status atual" %}</th>
						</tr>
					</thead>
					<tbody>
						{% for obj in queryset %}
						<tr>
							<td>{{ obj.usuario.username }}</td>
							<td>R$ {{ obj.valor_pago|floatformat:2 }}</td>
							<td>{{ obj.metodo }}</td>
							<td>{{ obj.status }}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>

			<div class="mt-3 d-flex gap-2">
				<a href="javascript:history.back()" class="btn btn-outline-secondary">{% trans "Cancelar" %}</a>
				<button type="submit" class="btn btn-primary">{% trans "Confirmar e aplicar" %} ({{ total }})</button>
			</div>
		</form>
	</div>
</div>
{% endblock %}
